<header class="topbar">
  <div class="crumbs">
    <h1><%= t('header.portal') %></h1>
    <p id="headerScheduleInfo"><%= headerInfo.date %> â€¢ Week <%= headerInfo.week %> â€¢ <%= headerInfo.lecture %></p>
  </div>

  <div class="top-actions">
    <div class="notifications-wrap" id="notificationsMenu">
      <button class="icon-btn notifications-trigger" id="notificationsTrigger" type="button" aria-label="<%= t('header.notifications') %>" aria-haspopup="true" aria-expanded="false">
        <span class="dot" id="notificationDot" aria-hidden="true" hidden></span>
        <span aria-hidden="true">ðŸ””</span>
      </button>

      <div class="notifications-panel" id="notificationsPanel" role="menu" aria-label="<%= t('header.notifications') %>">
        <div class="notifications-head">
          <strong><%= t('header.notifications') %></strong>
        </div>
        <div class="notifications-list" id="notificationsList">
          <p class="notifications-empty"><%= t('header.noNotifications') %></p>
        </div>
      </div>
    </div>

    <div class="language-wrap" id="languageMenu">
      <button class="icon-btn language-trigger" id="languageTrigger" type="button" aria-label="<%= t('lang.label') %>" aria-haspopup="true" aria-expanded="false">
        <span class="language-code"><%= String(currentLanguage || 'en').toUpperCase() %></span>
      </button>

      <div class="language-panel" id="languagePanel" role="menu" aria-label="<%= t('lang.label') %>">
        <button type="button" class="language-option <%= currentLanguage === 'lt' ? 'active' : '' %>" data-lang="lt"><%= t('lang.lt') %></button>
        <button type="button" class="language-option <%= currentLanguage === 'lv' ? 'active' : '' %>" data-lang="lv"><%= t('lang.lv') %></button>
        <button type="button" class="language-option <%= currentLanguage === 'ru' ? 'active' : '' %>" data-lang="ru"><%= t('lang.ru') %></button>
        <button type="button" class="language-option <%= currentLanguage === 'en' ? 'active' : '' %>" data-lang="en"><%= t('lang.en') %></button>
        <button type="button" class="language-option <%= currentLanguage === 'tr' ? 'active' : '' %>" data-lang="tr"><%= t('lang.tr') %></button>
      </div>
    </div>

    <div class="profile-wrap" id="profileMenu">
      <button class="profile profile-trigger" id="profileTrigger" type="button" aria-haspopup="true" aria-expanded="false" aria-label="<%= t('header.profileMenu') %>">
        <div class="avatar" aria-hidden="true">
          <% if (user && user.avatar_url) { %>
            <img src="<%= user.avatar_url %>" alt="Profile photo" class="avatar-img">
          <% } else { %>
            <%= user ? user.username.charAt(0).toUpperCase() : 'U' %>
          <% } %>
        </div>
        <div class="profile-meta">
          <strong id="profileName"><%= user ? user.username : 'Guest' %></strong>
          <small><%= user ? t(`roles.${user.role}`) : 'Visitor' %></small>
        </div>
      </button>

      <div class="profile-submenu" id="profileSubmenu">
        <a href="/profile" class="profile-subitem" id="profileLink">
          <span aria-hidden="true">ðŸ‘¤</span>
          Profile
        </a>
        <a href="/auth/logout" class="profile-subitem" id="profileLogout">
          <span aria-hidden="true">â†©</span>
          Logout
        </a>
      </div>
    </div>
  </div>
</header>

<script type="application/json" id="dashboardI18n">
  {
    "noNotifications": "<%= t('header.noNotifications') %>",
    "loadFailed": "<%= t('header.loadFailed') %>",
    "markRead": "<%= t('header.markRead') %>",
    "deleteLabel": "<%= t('header.delete') %>"
  }
</script>
